#!/usr/bin/perl -w

use strict;
use Config::Simple;

use TweetImage;
use TweetSearch;
use PrintDriver;

my $config = Config::Simple->new('config.ini');

for (;;) {
    my @tweets = TweetSearch::search($config->param('search_term'));
    foreach my $tweet ( @tweets ) {
        my $image = TweetImage::create($tweet);
        PrintDriver::print($config->param('printer'), $image);
        print("tweet from " . $tweet->{user}->{name} . "\n");
    }
    sleep 10;
}
